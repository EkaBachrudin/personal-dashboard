<div class="order-container">
  <!-- Page Title -->
  <div class="title-page">
    <h1>Order Lists</h1>
  </div>

  <section class="section-filter">
    <div class="item-filter">
        <img src="/assets/icons/filter.svg" alt="filter" class="w-[24px]">
    </div>
    <div class="item-filter">Filter By</div>
    <div #dateFilterTrigger class="item-filter cursor-pointer" (click)="onDateFilterClick()">
        <div class="mr-5"> 
          @if(formattedAppliedDates) { {{formattedAppliedDates}} } @else { Date }
        </div>
        <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
    </div>
    <div #orderTypeTrigger class="item-filter cursor-pointer" (click)="onOrderTypeFilterClick()">
        <div class="mr-5"> Order Type </div>
        <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
    </div>
    <div #orderStatusTrigger class="item-filter cursor-pointer" (click)="onOrderStatusFilterClick()">
        <div class="mr-5"> Order Status </div>
        <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
    </div>
    <div class="item-filter cursor-pointer" (click)="resetFilters()">
        <img src="/assets/icons/replay-red.svg" alt="replay" class="w-[20px] mr-2">
        <div class="text-[#EA0234]"> Reset Filter </div>
    </div>
  </section>

  <section class="section-filter-content">
     @if (showDateFilterDropdown) {

      <app-floating-dropdown [customClasses]="'left-[100px] rounded-[26px]'" [triggerElement]="dateFilterElement"
        (close)="onDateFilterClose()">
        <div class="flex justify-center">
          <app-date-picker [initialDate]="initialDate" [multiSelect]="true" (dateSelected)="onDateSelected($event)"
            (applyClicked)="onApplyDates($event)">
          </app-date-picker>
        </div>
      </app-floating-dropdown>

      }

     @if (showOrderTypeFilterDropdown) {

      <app-floating-dropdown [customClasses]="'left-[250px] rounded-[16px] min-w-[320px] p-0'" [triggerElement]="orderTypeFilterElement"
        (close)="onOrderTypeFilterClose()">
        <div class="order-type-filter">
          <!-- Order Type Filter Content (can be implemented later) -->
          <div class="filter-header">
            <h3 class="filter-title">Select Order Type</h3>
          </div>
        </div>
      </app-floating-dropdown>

      }

     @if (showOrderStatusFilterDropdown) {

      <app-floating-dropdown [customClasses]="'left-[400px] rounded-[16px] min-w-[320px] p-0'" [triggerElement]="orderStatusFilterElement"
        (close)="onOrderStatusFilterClose()">
        <div class="order-status-filter">
          <!-- Header -->
          <div class="filter-header">
            <h3 class="filter-title">Select Order Status</h3>
          </div>

          <!-- Status Chips -->
          <div class="status-chips-container">
            @for (status of availableOrderStatuses; track status) {
              <div
                class="status-chip"
                [ngClass]="{ 'selected': selectedOrderStatuses.includes(status) }"
                (click)="toggleOrderStatus(status)">
                {{ status }}
              </div>
            }
          </div>

          <!-- Note -->
          <div class="filter-note">
            *You can choose multiple order status
          </div>

          <!-- Apply Button -->
          <div class="filter-actions">
            <button
              class="apply-button"
              [disabled]="selectedOrderStatuses.length === 0"
              (click)="applyOrderStatusFilter()">
              Apply Now
            </button>
          </div>
        </div>
      </app-floating-dropdown>

      }
  </section>

  <section class="section-table">
    <!-- Desktop Table View -->
    <div class="table-container desktop-table">
      <div class="table-wrapper">
        <table class="order-table">
          <thead>
            <tr>
              <th>{{ tableHeaders.id }}</th>
              <th>{{ tableHeaders.name }}</th>
              <th>{{ tableHeaders.address }}</th>
              <th>{{ tableHeaders.date }}</th>
              <th>{{ tableHeaders.type }}</th>
              <th>{{ tableHeaders.status }}</th>
            </tr>
          </thead>
          <tbody>
            @for (order of orderData; track order.id) {
            <tr>
              <td>{{ order.id }}</td>
              <td>{{ order.name }}</td>
              <td>{{ order.address }}</td>
              <td>{{ order.date }}</td>
              <td>{{ order.type }}</td>
              <td>
                <span
                  class="status-badge"
                  [ngClass]="'status-' + order.status.toLowerCase().replace(' ', '-')">
                  {{ order.status }}
                </span>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </div>

    <!-- Mobile Card View -->
    <div class="mobile-cards">
      @for (order of orderData; track order.id) {
      <div class="order-card">
        <div class="card-header">
          <h3 class="order-id">{{ tableHeaders.id }}: {{ order.id }}</h3>
          <span
            class="status-badge"
            [ngClass]="'status-' + order.status.toLowerCase().replace(' ', '-')">
            {{ order.status }}
          </span>
        </div>
        <div class="card-body">
          <div class="card-row">
            <span class="label">{{ tableHeaders.name }}:</span>
            <span class="value">{{ order.name }}</span>
          </div>
          <div class="card-row">
            <span class="label">{{ tableHeaders.address }}:</span>
            <span class="value">{{ order.address }}</span>
          </div>
          <div class="card-row">
            <span class="label">{{ tableHeaders.date }}:</span>
            <span class="value">{{ order.date }}</span>
          </div>
          <div class="card-row">
            <span class="label">{{ tableHeaders.type }}:</span>
            <span class="value">{{ order.type }}</span>
          </div>
        </div>
      </div>
      }
    </div>
  </section>

</div>