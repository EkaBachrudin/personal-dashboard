<section class="flex bg-white md:w-fit w-full border border-[#97979734] rounded-[10px] shadow-sm overflow-x-auto">
  <div class="py-4 px-6 border-r border-[#97979734] text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit">
    <img src="/assets/icons/filter.svg" alt="filter" class="w-[24px]">
  </div>
  <div class="py-4 px-6 border-r border-[#97979734] text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit">Filter By</div>
  <div #dateFilterTrigger class="py-4 px-6 border-r border-[#97979734] text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit" (click)="onDateFilterClick()">
    <div class="mr-5">
      @if(formattedAppliedDates) { {{formattedAppliedDates}} } @else { Date }
    </div>
    <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
  </div>
  <div #orderTypeTrigger class="py-4 px-6 border-r border-[#97979734] text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit" (click)="onOrderTypeFilterClick()">
    <div class="mr-5"> Order Type </div>
    <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
  </div>
  <div #orderStatusTrigger class="py-4 px-6 border-r border-[#97979734] text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit" (click)="onOrderStatusFilterClick()">
    <div class="mr-5"> Order Status </div>
    <img src="/assets/icons/chevronDown.svg" alt="down" class="w-[24px]">
  </div>
  <div class="py-4 px-6 text-[14px] font-bold flex justify-center items-center cursor-pointer whitespace-nowrap min-w-fit" (click)="resetFilters()">
    <img src="/assets/icons/replay-red.svg" alt="replay" class="w-[20px] mr-2">
    <div class="text-[#EA0234]"> Reset Filter </div>
  </div>
</section>

<section class="section-filter-content">
  @if (showDateFilterDropdown) {
    <app-floating-dropdown [customClasses]="'left-[8px] sm:left-[100px] rounded-[26px]'" [triggerElement]="dateFilterElement"
      (close)="onDateFilterClose()">
      <div class="flex justify-center">
        <app-date-picker [initialDate]="initialDate" [multiSelect]="true" (dateSelected)="onDateSelected($event)"
          (applyClicked)="onApplyDates($event)">
        </app-date-picker>
      </div>
    </app-floating-dropdown>
  }

  @if (showOrderTypeFilterDropdown) {
    <app-floating-dropdown [customClasses]="'left-[10px] sm:left-[250px] rounded-[16px] min-w-[320px] p-0'" [triggerElement]="orderTypeFilterElement"
      (close)="onOrderTypeFilterClose()">
      <div class="p-6 bg-white max-w-[521px]">
        <!-- Header -->
        <div class="mb-6 pb-4">
          <h3 class="text-[18px] font-semibold text-gray-900 m-0">Select Order Type</h3>
        </div>

        <!-- Type Chips -->
        <div class="flex flex-wrap gap-3 mb-6">
          @for (type of availableOrderTypes; track type) {
            <div
              class="px-10 py-2 text-[14px] font-medium rounded-[17px] border cursor-pointer transition-all duration-200 active:transform active:scale-95"
              [ngClass]="{
                'bg-white text-gray-700 border-gray-200 hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700': !selectedOrderTypes.includes(type),
                'bg-blue-500 text-white border-blue-500 hover:bg-blue-600 hover:border-blue-600': selectedOrderTypes.includes(type)
              }"
              (click)="toggleOrderType(type)">
              {{ type }}
            </div>
          }
        </div>

        <!-- Apply Button -->
        <div class="pt-4 border-t border-gray-100">
          <div class="text-[12px] text-gray-500 mb-6 italic">
            *You can choose multiple order types
          </div>
          <div class="flex justify-center w-full">
            <button
              class="px-6 py-3 bg-blue-500 text-white text-[14px] font-medium rounded-[8px] transition-all duration-200 hover:bg-blue-600 hover:shadow-md disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:bg-gray-200 active:transform active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
              [disabled]="selectedOrderTypes.length === 0"
              (click)="applyOrderTypeFilter()">
              Apply Now
            </button>
          </div>
        </div>
      </div>
    </app-floating-dropdown>
  }

  @if (showOrderStatusFilterDropdown) {
    <app-floating-dropdown [customClasses]="'left-[10px] sm:left-[400px] rounded-[16px] min-w-[320px] p-0'" [triggerElement]="orderStatusFilterElement"
      (close)="onOrderStatusFilterClose()">
      <div class="p-6 bg-white max-w-[521px]">
        <!-- Header -->
        <div class="mb-6 pb-4">
          <h3 class="text-[18px] font-semibold text-gray-900 m-0">Select Order Status</h3>
        </div>

        <!-- Status Chips -->
        <div class="flex flex-wrap gap-3 mb-6">
          @for (status of availableOrderStatuses; track status) {
            <div
              class="px-10 py-2 text-[14px] font-medium rounded-[17px] border cursor-pointer transition-all duration-200 active:transform active:scale-95"
              [ngClass]="{
                'bg-white text-gray-700 border-gray-200 hover:border-blue-300 hover:bg-blue-50 hover:text-blue-700': !selectedOrderStatuses.includes(status),
                'bg-blue-500 text-white border-blue-500 hover:bg-blue-600 hover:border-blue-600': selectedOrderStatuses.includes(status)
              }"
              (click)="toggleOrderStatus(status)">
              {{ status }}
            </div>
          }
        </div>

        <!-- Apply Button -->
        <div class="pt-4 border-t border-gray-100">
          <div class="text-[12px] text-gray-500 mb-6 italic">
            *You can choose multiple order status
          </div>
          <div class="flex justify-center w-full">
            <button
              class="px-6 py-3 bg-blue-500 text-white text-[14px] font-medium rounded-[8px] transition-all duration-200 hover:bg-blue-600 hover:shadow-md disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed disabled:hover:shadow-none disabled:hover:bg-gray-200 active:transform active:scale-95 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
              [disabled]="selectedOrderStatuses.length === 0"
              (click)="applyOrderStatusFilter()">
              Apply Now
            </button>
          </div>
        </div>
      </div>
    </app-floating-dropdown>
  }
</section>